% !TeX root = ../mthesis.tex
% !TeX encoding = UTF-8
% !TeX spellcheck = en_US


\chapter{Completeness and Undecidability}

%\begin{definition}
	We call a logical calculus, i.e.~a formal proof system, {\myem complete} if every valid formula is provable.
	In other words any expression that is satisfied by all interpretations 
	is deducible or justifiable by applying rules of the formal system only.
	We expect a useful calculus to be {\myem sound}, that is, every proven formula is valid, 
	i.e.~it holds in all interpretations.
%\end{definition}

\begin{lemma}[Refutation]
	By definition of the semantics of negation a formula is valid if and only if its negation is not satisfiable.
\end{lemma}

\begin{theorem}[Completeness, Gödel 1929]
	Natural deduction (see \vref{sec:natural:deduction}), a sound formal system, is complete.
\end{theorem}

\begin{theorem}
	[Undecidability, Church 1936, Turing 1937]
	The satisfiability problem for first order logic is undecidable.
\end{theorem}

\begin{theorem}[Trakhtenbort 1950, Craig 1950]
	The satisfiability problem for first order logic on {\myem finite} structures (domains) is undecidable.
\end{theorem}

\begin{theorem}[Finite model property]
\end{theorem}








\begin{theorem}[Compactness]\label{the:compactness}
	If every finite subset of a set of formulas $S$ has a model then $S$ has a model. 
\end{theorem}

\begin{theorem}[Löwenheim Skolem]\label{the:loewenheim}
	If a set of formulas $S$ has a model then $S$ has a countable model.
\end{theorem}

\begin{theorem}[Herbrand]\label{the:herbrand}
	Let $S$ be a set of clauses without equality. Then the following statements are equivalent.
	\begin{itemize}
		\item $S$ is satisfiable.
		\item $S$ has a Herbrand model.
		\item Every finite subset of all ground instances of $S$ has a Herbrand model.
	\end{itemize} 
\end{theorem}

\begin{corollary}
	Let $S$ be a set of clauses without equality. 
	Then $S$ is unsatisfiable if and only if there exists 
	an unsatisfiable finite set of ground instances of $S$.
\end{corollary}

\begin{lemma}
With Skolemization and Tseitin transformation we can effectively transform a arbitrary first order formula into an equisatisfiable set of clauses.	
\end{lemma}



\section{Decidable fragments}\label{sec:decidable:fol:fragments}

This subsection presents purely syntactical defined fragments
of first order logic where satisfiability is decidable.\footnote{
	Definition and compact overview from presentation
	“\href{http://logic.rwth-aachen.de/~graedel/kalmar.pdf}{Decidable fragments of first-order and fixed-point logic}”
	by E.~Grädel (\url{http://logic.rwth-aachen.de/~graedel/}).	
}  



\begin{definition}[\PNF]
	A first order formula $F = \quantify_1 x_1 \ldots \quantify_n x_n\, G$ 
	where $\quantify_i \in \{\exists,\forall\}$ are quantifiers
	for $1 < i \leq n$,
	the subformula $G$ is quantifier free, and 
	the set of free variables $\fvar(G) = \{ x_1, \ldots, x_n \}$
	matches the quantified variables
	is in {\myem prenex normal form}.
\end{definition}


\begin{definition}[\cite{MR1482227}]\label{def:prefix:class}
	We describe classes of first order formulae in \PNF with triples
	\[
	[\, \Pi, (p_1,p_2,\ldots), (f_1,f_2,\ldots)\,]_{(\mEQ)}
	\]
	where $\Pi = \quantify_1 \ldots \quantify_n$ describes the quantifier prefix 
	$\quantify_1 x_1 \ldots \quantify_n x_n$ without variables,
	the value $p_i$ the maximal number of predicate symbols
	and the value $f_i$ the maximal number of function symbols with arity $i$.
	The equality symbol is not counted as binary predicate symbol.
	The subscript indicates its presence of the equality symbol in the signature. 
	
\end{definition}

\begin{example}
	The monadic predicate calculus includes formulae with arbitrary quantifier prefixes, 
	arbitrary many unary predicate symbols, the equality symbol, but no function symbols.
	\begin{align*}
	\colG [\,all, (\omega), (1)\,]_= 
	\quad\supsetneq& &
	[\,all, (\omega), (0 )&\,]_=
	\tag{Löwenheim 1925, Kalmár 1929}
	\\
	\colG [\,\exists^*\forall\exists^*,all,(1)\,]_=
	\quad\supsetneq& &
	[\,\exists^*\forall\exists^*,all,(0)&\,]_{=} \tag{Ackermann 1928}
	\end{align*}
	The Ackermann prefix class contains formulae with arbitrary many existential quantifiers, 
	but just one universal quantifier. It contains arbitrary many predicate symbols
	with arbitrary arities, the equality symbol, but no function symbols. 
\end{example}

%Goldfarb, Gurevich, Rabin, Shelah completly characterized decidable and undecidable prefix classes.

\begin{table}[hbt]
	\begin{align*}
	%\colG [\,all, (\omega), (0 )&\colG\,]_= \tag{Löwenheim 1925, Kalmár 1929}
	%\\
	[\,\exists^{∗}\forall^{∗}, all, (0)&\,]_{=} \tag{Bernays, Schönfinkel 1928, Ramsey 1932}
	\\
	[\,\exists^{∗}\forall^2\exists^{∗} , all, (0)&\,] \tag{Gödel 1932, Kalmár 1933, Schütte 1934}
	\\
	[\,all, (\omega), (\omega)&\,] \tag{Löb 1967, Gurevich 1969}
	\\
	[\,\exists^{∗}\forall\exists^{∗}, all, all&\,] \tag{Gurevich 1973}
	\\
	[\,\exists^{∗}, all, all&\,]_{=} \tag{Gurevich 1976}
	\end{align*}
	%\caption[Decidable prefix classes]{Decidable prefix classes in first order logic}
	\caption[Decidable prefix classes]{Decidable prefix classes with final model property }
	\label{tab:decidedable:FiniteModelProperty}
\end{table}

\begin{table}[hbt]
	\begin{align*}
	[\,all, (\omega), (1)&\,]_{=} \tag{Rabin 1969} 
	\\
	[\,\exists^{∗}\forall\exists^{∗}, all, (1)&\,]_{=} \tag{Shelah 1977}
	\end{align*}
	%\caption[Decidable prefix classes]{Decidable prefix classes in first order logic}
	\caption[Decidable prefix classes]{Decidable prefix classes with infinity axioms. }
	\label{tab:decidable:InfinityAxioms}
\end{table}

\begin{lemma}
	Satisfiability is decidable \cite{MR1482227} in all prefix classes from Tables 
	\ref{tab:decidedable:FiniteModelProperty} and \ref{tab:decidable:InfinityAxioms}.
	Each of theses classes is closed under conjunction with respect to satisfiability.
\end{lemma}



\section{Theories}\label{sec:decidable:fol:theories}

We follow definitions and examples in \cite{AM2015L}.

\begin{definition}[Theory]
	A {\myem first order theory} is a pair of a first order signature 
	and the possible infinite conjunction $\bigwedge_i A_i$ of first order formulae, 
	i.e.~the axioms, over the theory's signature. 
	A theory is satisfiable if there exists a model for the its axioms.
%	
	A sentence over a theory's signature is a {\myem theorem} in the theory 
	if and only if it holds in any model for the theory's axioms.
	\[
		\bigwedge_i A_i \models \mathsf{theorem} 
		\quad\text{ or }\quad
		\bigwedge_i A_i \limp \mathsf{theorem} 
	\]
	A theory is decidable if it is decidable whether an arbitrary sentence holds in the theory.
\end{definition}

\begin{example}
A theory with axioms $\forall x\,\mP(x)$ and $\exists x\,\lnot\mP(x)$ is not satisfiable,
but every sentence is a theorem.
\end{example}
%
\begin{remark} 
In refuational theorem proving
we show the unsatisfiabilty 
of a negated sentence, 
i.e.~a {\myem conjecture},
in conjunction with the axioms
to conclude that the conjecture is indeed a theorem.
\[
	\lnot\left(\bigwedge_i A_i \limp \mathsf{conj}\right) \equiv
	\lnot\left(\lnot\bigwedge_i A_i \lor \mathsf{conj}\right) \equiv
	\bigwedge_i A_i \land \lnot \mathsf{conj}
\]
\end{remark}

\begin{definition}
	[Equivalence]
	\label{def:equivalence:axioms}
\begin{align*}
\forall x\, 
&\left(x \mEQ x\right) 
\tag*{reflexivity}
\\
\forall x \forall y\, 
&\left(x \mEQ y \limp y \mEQ x \right)
\tag*{symmetry} 
\\
\forall x \forall y \forall z\,
&\left(x \mEQ y \land y\mEQ z \limp x\mEQ z\right) 
\tag*{transitiviy}
\end{align*}
\end{definition}

\begin{definition}
	[Congruence schemata]
	\label{def:congruence:schemata}
	\begin{align*}
	\forall\vec{x}\,\forall\vec{y}\,
	&\left(\vec{x}\mEQ\vec{y} \limp \mf(\vec{x}) \mEQ \mf(\vec{y}) \right)
	\tag*{$\mf\in\mcFfn$}
	\\
	\forall\vec{x}\,\forall\vec{y}\, 
	&\left(\vec{x}\mEQ\vec{y} \limp (\mP(\vec{x}) \limp \mP(\vec{y}))\right)
	\tag*{$\mP\in\mcFPn$}
	\end{align*}
\end{definition}

\begin{lemma}In natural deduction these axiom a provable properties of equality.\end{lemma}
\begin{proof}
	\begin{gather*}
	\begin{BMAT}{lcllllc}{cc}
	1 & x_0 & x_0 = x_0      && {=}i  
	\\
	2 &     & \forall x\,x=x && \forall i
	\addpath{(1,1,1)rrulld}
	\end{BMAT}
	\end{gather*}
\end{proof}

\begin{remark}We have ommited the biconditionals in symmetry and congruene for implications.
%	because $\forall x\forall y\,G(y,x)\equiv\forall x\forall y\,G(x,y)$, hence
%	$\forall x\forall y\,(G(x,y)\land G(y,x))
%	\equiv\forall x\forall y\,G(x,y)\land \forall x\forall y\,G(y,x))
%	\equiv\forall x\forall y\,G(x,y)$.
	\begin{align*}
	\forall x \forall y\,
	\left(x \mEQ y \lbic y \mEQ x \right) 
	&
	\equiv\forall x \forall y\,
	\left(x \mEQ y \limp y \mEQ x \right)
	\\
	\forall\vec{x}\,\forall\vec{y}\, 
	\left(\vec{x}\mEQ\vec{y} \limp (\mP(\vec{x}) \lbic \mP(\vec{y}))\right)
	&\equiv
	\forall\vec{x}\,\forall\vec{y}\,
	\left(\vec{x}\mEQ\vec{y} \limp (\mP(\vec{x}) \limp \mP(\vec{y}))\right)
	\end{align*}
\end{remark}

\begin{definition}
	[Natural Numbers]
	\label{def:natural:numbers:axioms}
	$0\in\mcFn[0], \msucc\in\mcFn[1]$	
\begin{align*}
\forall x\, &(\msucc(x) \mNE 0)
\tag*{zero} 
\\ %–––––––––––––––––––––––––––
\forall x \forall y\, &(\msucc(x) \mEQ \msucc(y) \limp x \mEQ y)
\tag*{injectivity}
\\
\colG\forall x\forall y\,&\colG(x\mEQ y \limp \msucc(x)\mEQ\msucc(y))
\tag*{congruence}
\\ 
\underbrace{G(0)}_{\text{base}} 
\land\, \forall x\,&
\underbrace{
	\left(G(x) \limp G(\msucc(x))\right)
}_{\text{step case}}
\,\limp\, \forall y\,G(y)
\tag*{induction schema}
\end{align*}
\end{definition}

\begin{definition}
	[Addition]
	\label{def:addition:axioms}
	$+\in\mcFfn[2]$
\begin{align*}
\forall x\,
&(x+0 \mEQ x) 
\tag*{addition of zero}\\
\forall x\forall y\,
&(x+\msucc(y) \mEQ \msucc(x+y)
\tag*{addition of non-zero}
\\
\colG\forall x_1\forall x_2\forall y_1\forall y_2\,
&\colG (x_1\mEQ y_1\land x_2\mEQ y_2 \limp x_1+y_1\mEQ x_2+y_2)
\tag*{congruence of $+$}
\end{align*}
\end{definition}

\begin{lemma}[Neutral element, commutativity and associativity of addition]
	\begin{align*}
	\forall x\,&(0+x \mEQ x)\\
	\forall x\forall y\,&(x+y \mEQ y+x)\\
	\forall x\forall y\forall z\,&(x+(y+z) \mEQ (x+y)+z)
	\end{align*}
\end{lemma}

%\begin{proof}by induction
%	\begin{align*}
%	0 + 0 \mEQ 0
%	\tag*{$\forall e$}
%	\\
%	0+x\mEQ x\tag*{assumption}
%	\\
%	0+\msucc(x)\mEQ \msucc(x)
%	\\
%	(0 + 0 \mEQ 0)
%	\land
%	\forall x\,(0+x\mEQ x \limp 0+\msucc(x)\mEQ\msucc(x))
%	\limp
%	\forall y\,(0+y\mEQ y)
%	\tag*{induction}
%	\end{align*}
%\end{proof}

\begin{definition}
	[Multiplikation]
	\label{tab:addition:axioms}
	$\times\in\mcFfn[2]$
	\begin{align*}
	\forall x\,
	&(x\times 0 \mEQ 0) 
	\tag*{multiplication by zero}\\
	\forall x\forall y\,
	&(x\times\msucc(y) \mEQ (x\times y) + x)
	\tag*{multiplication by non-zero}
	\\
	\colG\forall x_1\forall x_2\forall y_1\forall y_2\,
	&\colG (x_1\mEQ y_1\land x_2\mEQ y_2 \limp x_1\times y_1\mEQ x_2 \times y_2)
	\tag*{congruence of $\times$}
	\end{align*}
\end{definition}










