% !TeX root = ../mthesis.tex
% !TeX encoding = UTF-8
% !TeX spellcheck = en_US


\chapter{Completeness and Undecidability}

%\begin{definition}
	We call a logical calculus, i.e.~a formal proof system, {\myem complete} if every valid formula is provable.
	In other words any expression that is satisfied by all interpretations 
	is deducible or justifiable by applying rules of the formal system only.
	We expect a useful calculus to be {\myem sound}, that is, every proven formula is valid, 
	i.e.~it holds in all interpretations.
%\end{definition}

\begin{lemma}[Refutation]
	By definition of the semantics of negation a formula is valid if and only if its negation is not satisfiable.
\end{lemma}

\begin{theorem}[Completeness, Gödel 1929]
	Natural deduction (see \vref{sec:natural:deduction}), a sound formal system, is complete.
\end{theorem}

\begin{theorem}
	[Undecidability, Church 1936, Turing 1937]
	The satisfiability problem for first order logic is undecidable.
\end{theorem}

\begin{theorem}[Trakhtenbort 1950, Craig 1950]
	The satisfiability problem for first order logic on {\myem finite} structures (domains) is undecidable.
\end{theorem}

\begin{theorem}[Finite model property]
\end{theorem}








\begin{theorem}[Compactness]\label{the:compactness}
	If every finite subset of a set of formulas $S$ has a model then $S$ has a model. 
\end{theorem}

\begin{theorem}[Löwenheim Skolem]\label{the:loewenheim}
	If a set of formulas $S$ has a model then $S$ has a countable model.
\end{theorem}

\begin{theorem}[Herbrand]\label{the:herbrand}
	Let $S$ be a set of clauses without equality. Then the following statements are equivalent.
	\begin{itemize}
		\item $S$ is satisfiable.
		\item $S$ has a Herbrand model.
		\item Every finite subset of all ground instances of $S$ has a Herbrand model.
	\end{itemize} 
\end{theorem}

\begin{corollary}
	Let $S$ be a set of clauses without equality. 
	Then $S$ is unsatisfiable if and only if there exists 
	an unsatisfiable finite set of ground instances of $S$.
\end{corollary}

\begin{lemma}
With Skolemization and Tseitin transformation we can effectively transform a arbitrary first order formula into an equisatisfiable set of clauses.	
\end{lemma}



\section{Fragments of first order logic}\label{sec:decidable:fol:fragments}

This subsection presents purely syntactical defined fragments
of first order logic where satisfiability is decidable.\footnote{
	Definition and compact overview from presentation
	“\href{http://logic.rwth-aachen.de/~graedel/kalmar.pdf}{Decidable fragments of first-order and fixed-point logic}”
	by E.~Grädel (\url{http://logic.rwth-aachen.de/~graedel/}).	
}  



\begin{definition}[\PNF]
	A first order formula $F = \quantify_1 x_1 \ldots \quantify_n x_n\, G$ is in prenex normal form
	if $\quantify_i \in \{\forall,\exists\}$ for $1 < i \leq n$,
	the subformula $G$ is quantifier free, and 
	the set of free variables $\fvar(G) = \{ x_1, \ldots, x_n \}$
	matches the quantified variables.
\end{definition}


\begin{definition}[\cite{MR1482227}]\label{def:prefix:class}
	We describe classes of first order formulae in \PNF with triples
	\[
	[\, \Pi, (p_1,p_2,\ldots), (f_1,f_2,\ldots)\,]_{(\mEQ)}
	\]
	where $\Pi$ describes the quantifier prefix 
	$\Upsilon\!_1 \ldots \Upsilon\!_n$ without variables,
	the value $p_i$ the maximal number of predicate symbols
	and the value $f_i$ the maximal number of function symbols with arity $i$.
	The equality symbol is not counted as binary predicate symbol.
	The subscript indicates its presence of the equality symbol in the signature. 
	
\end{definition}

\begin{example}
	The monadic predicate calculus includes formulae with arbitrary quantifier prefixes, 
	arbitrary many unary predicate symbols, the equality symbol, but no function symbols.
	\begin{align*}
	\colG [\,all, (\omega), (1)\,]_= 
	\quad\supsetneq& &
	[\,all, (\omega), (0 )&\,]_=
	\tag{Löwenheim 1925, Kalmár 1929}
	\\
	\colG [\,\exists^*\forall\exists^*,all,(1)\,]_=
	\quad\supsetneq& &
	[\,\exists^*\forall\exists^*,all,(0)&\,]_{=} \tag{Ackermann 1928}
	\end{align*}
	The Ackermann prefix class contains formulae with arbitrary many existential quantifiers, 
	but just one universal quantifier. It contains arbitrary many predicate symbols
	with arbitrary arities, the equality symbol, but no function symbols. 
\end{example}

%Goldfarb, Gurevich, Rabin, Shelah completly characterized decidable and undecidable prefix classes.

\begin{table}[hbt]
	\begin{align*}
	%\colG [\,all, (\omega), (0 )&\colG\,]_= \tag{Löwenheim 1925, Kalmár 1929}
	%\\
	[\,\exists^{∗}\forall^{∗}, all, (0)&\,]_{=} \tag{Bernays, Schönfinkel 1928, Ramsey 1932}
	\\
	[\,\exists^{∗}\forall^2\exists^{∗} , all, (0)&\,] \tag{Gödel 1932, Kalmár 1933, Schütte 1934}
	\\
	[\,all, (\omega), (\omega)&\,] \tag{Löb 1967, Gurevich 1969}
	\\
	[\,\exists^{∗}\forall\exists^{∗}, all, all&\,] \tag{Gurevich 1973}
	\\
	[\,\exists^{∗}, all, all&\,]_{=} \tag{Gurevich 1976}
	\end{align*}
	%\caption[Decidable prefix classes]{Decidable prefix classes in first order logic}
	\caption[Decidable prefix classes]{Decidable prefix classes with final model property }
	\label{tab:decidedable:FiniteModelProperty}
\end{table}

\begin{table}[hbt]
	\begin{align*}
	[\,all, (\omega), (1)&\,]_{=} \tag{Rabin 1969} 
	\\
	[\,\exists^{∗}\forall\exists^{∗}, all, (1)&\,]_{=} \tag{Shelah 1977}
	\end{align*}
	%\caption[Decidable prefix classes]{Decidable prefix classes in first order logic}
	\caption[Decidable prefix classes]{Decidable prefix classes with infinity axioms. }
	\label{tab:decidable:InfinityAxioms}
\end{table}

\begin{lemma}
	Satisfiability is decidable \cite{MR1482227} in all prefix classes from Tables 
	\ref{tab:decidedable:FiniteModelProperty} and \ref{tab:decidable:InfinityAxioms}.
	Each of theses classes is closed under conjunction with respect to satisfiability.
\end{lemma}



\section{Theories in first oder logic}\label{sec:decidable:fol:theories}

\begin{definition}(Theory)
	A theory is the possible infinite conjunction $\bigwedge A_i$ of universally quantified formulae, i.e. the axioms over the theory's signature. A theorem $\mathsf{th}$ is a closed (no free variables) formula over this signature
	that holds in any model for the axioms and we write
	\[
		\bigwedge A_i \models \mathsf{th} 
		\quad\text{ or }\quad
		\bigwedge A_i \limp \mathsf{th} 
	\]
\end{definition}

In refuational theorem proving we just negate the statement.
\[
	\lnot\left(\bigwedge A_i) \limp \mathsf{th}\right) \equiv
	\lnot\left(\lnot\bigwedge A_i \lor \mathsf{(th)}\right) \equiv
	\bigwedge A_i \land \lnot \mathsf{th}
\]





\subsection{Presburger arithmetic}

The signature of Presburger arithmetic contains two constant symbols $0,1$, 
one binary function symbol $+$ and the equality symbol $\mEQ$.
%Let $G$ be an arbitrary first order expression over this signature.
Then Table \ref{tab:presburger:axioms} states the axioms for Presburger arithmetic. 
The last line states the induction schema for any formulae $G$ where $\fvar(G) = \{ x \}$.

\begin{table}[hbt]
	% ===================================
	\input{AXIOMS/PresburgerArithmeticFOF}
	% ===================================	
	\caption{(Infinite) axiomisation of Presburger arithmetic}
	\label{tab:presburger:axioms}
\end{table}

\begin{proof}[Natural deduction proof:] $0\mNE 1$ in Presburger arithmetic.
	\begin{align*}
	1 & &\forall x\,( 0 \mNE x + 1 ) \tag*{premise}\\
	2 & &\forall x\,(x + 0 \mEQ x ) \tag*{premise}\\
	3 & & 0 \mNE 0 + 1\tag*{$\forall$ e 1} \\
	4 & & 1 + 0 \mEQ 1\tag*{$\forall$ e 2}
	\end{align*}
\end{proof}

\begin{remark}
	The axioms of Presburger arithmetic 
cannot be stated in any decidable prenex class of first order logic,
because the signature contains a binary function symbol \emph{and} the equality symbol.
The induction axiom easily translates into the prenex normal form and clausal normal form.
\begin{gather*}
	\exists x \forall y \left(
	\lnot G(0) \lor ({\colG G(x)\land{}} \lnot G(x+1) \lor G(y)
	\right)\tag*{\PNF}
%	\\
%	\equiv
	\\
	\lnot G(0) \lor \lnot G(\mc+1) \lor G(y)
	\tag*{\CNF}
\end{gather*}
\end{remark}

\begin{example}\label{ex:presburger:G}
	With $G = \exists y\, (y+y\mEQ x)\lor(y+y+1\mEQ x)$
	the induction schema yields
	\begin{gather*}
	{\exists y\, (y+y\mEQ 0)\lor(y+y+1\mEQ 0)}
	\\\land\\
	\forall x\, 
	\Big(\exists y\, (y+y\mEQ x)\lor(y+y+1\mEQ x)) 
	\limp 
	(\exists y\, (y+y\mEQ x+1)\lor(y+y+1\mEQ x+1)
	\Big)
	\\\limp\\
	\forall x \exists y\, (y+y\mEQ x)\lor(y+y+1\mEQ x)
	\end{gather*}
\end{example}



