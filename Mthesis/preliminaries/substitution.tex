% !TeX root = ../mthesis.tex
% !TeX encoding = UTF-8
% !TeX spellcheck = en_US

\begin{definition}\label{def:substitution}
	A {\myem substitution} $\sigma$ is a mapping from variables $x\in\mcV$ to terms in $\mcTFfV$
	where the {\myem domain }$\dom(\sigma) = \{ x\in\mcV\mid\sigma(x) \neq x \}$ is finite.
	We write substitutions as bindings $\sigma=\{ x_1\mapsto s_1,\ldots,x_n\mapsto s_n \}$
	where $\dom(\sigma)=\{ x_1,\ldots,x_n \}$ and $\sigma(x_i)=s_i$.
	A {\myem variable substitution} is a mapping from $\mcV$ to $\mcV$.
	A {\myem renaming} is a bijective variable substitution.
	A {\myem proper instantiator} is a substitution that is not a variable substitution.
	We define the instance $\mct\sigma$ of a term
	respectively the application of a substitution $\sigma$ to a term $\mct$:
	\begin{align*}
		\mct\sigma &= \left\{\begin{array}{ll}
			s_i 				& \text{if }\mct=x_i\in\dom(\sigma)\\
			y					& \text{if }\mct=y\in\mcV\,\backslash\dom(\sigma)\\
%			\mct					& \text{if }\mct \in \mcF^{\!0}\\
			\mcf(t_1\sigma,\ldots,t_n\sigma)	&\text{if }\mct=\mcf(t_1,\ldots,t_n), \mcf\!\in\mcFn \\[0.5em]
%			P(t_1\sigma,\ldots,t_n\sigma)	&\text{if }\mkt=P(t_1,\ldots,t_n), P\in\mcFPn \\
%			s\sigma\mEQ t\sigma			&\text{if }\mkt=s\mEQ t \\[0.5em]
%			\lnot(A\sigma)					&\text{if }\mkt=\lnot A \\
%			L_1\sigma\lor\ldots\lor L_n\sigma	&\text{if }\mkt=L_1\lor\ldots\lor L_n \\
		\end{array}\right.	
	\end{align*}
%	
	We define the {\myem composition} of two substitutions $\sigma$ and $\tau$ as follows
	\begin{align*}
		\sigma\tau&=\{ x_i\mapsto s_i\tau\mid x_i\in\dom(\sigma) \}
		\cup
		\{ y_i\mapsto t_i\mid y_i\in\dom(\tau) \backslash \dom(\sigma) \}.
	\end{align*}
	
\end{definition}

\begin{lemma}\label{lem:substitution}
	With the definitions in \ref{def:substitution} the identity
	$(\mkt\sigma)\tau = \mkt(\sigma\tau)$ holds for
	arbitrary terms, literals, clauses, and substitutions.
\end{lemma}